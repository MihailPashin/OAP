# 07.02.2020

**Задача**: написать класс, реализующий основные арифметические действия (+, -, *, /) с БОЛЬШИМ целым (число может быть произвольной длины, не ограничено 64 битами)

**Основная идея**: хранить число в виде строки

На **07.02.20** сделано сложение и валидация данных

```kt
import java.lang.Exception

class BigNumber(var value: String){
    init {
        checkString(value)
    }

    private fun checkString(str: String){
        for (c in str)
            if (!c.isDigit())
                throw Exception("неверная строка")
    }

    // скрытый (private) метод для сложения со строкой
    private fun add(number: String): BigNumber{
        var tempValue=value
        var tempNumber=number

        // выравниваем строки по длине: короткую добиваем слева нулями
        if (tempValue.length>number.length)
            tempNumber=number.padStart(
                tempValue.length,'0')
        else
            tempValue=value.padStart(tempValue.
                length,'0')

        // temp - сумма двух цифр и одновременно остаток от предыдущего сложения        
        var temp=0

        var result=""

        // reversed() переворачивает диапазон - реализовано посимвольное сложение "столбиком"
        for (i in tempValue.indices.reversed())
        {
           temp=tempNumber[i].toString().toInt()+
                tempValue [i].toString().toInt()+
                temp
           result=(temp%10).toString()+result
           temp/=10
        }

        if (temp>0)
            result=temp.toString()+result

        return BigNumber(result)
    }

    // публичный метод сложения с любым допустимым типом данных (целые и строки)
    fun add(number:Any): BigNumber{
       when(number){
           is Int, is Long,is Short,is Byte->
               return add(number.toString())
           is String ->{
               checkString(number)
               return add(number)
           }
       }
       throw Exception("c таким типом не работаю")
    }
}

fun main(){
    try {
        var bn = BigNumber("123")
        println(bn.add("980").value)
    }catch (e:Exception){
        println(e)
    }
}
```

# 08.02.2020

Переделана валидация (с учетом отрицательных чисел).
Сделано вычитание.
Сделано, но не отлажено умножение.

```kt
import java.lang.Exception

class BigNumber(var value:String="0"){
    var negative:Boolean=false
    var _number:String=""
    init {
        val r=Regex("""(-)?(\d+)""")
        val mr=r.find(value.trim())
        if(mr==null)
            throw Exception("неверная строка")
        negative=(mr.groupValues[1]=="-")
        _number=mr.groupValues[2]
    }

    private fun add(number: BigNumber):BigNumber{
        var tempValue=_number
        var tempNumber=number._number
        if (tempValue.length>tempNumber.length)
            tempNumber=tempNumber.padStart(
                tempValue.length,'0')
        else
            tempValue=_number.padStart(tempValue.
                length,'0')
        if(number.negative==this.negative) {
            var temp = 0
            var result = ""
            for (i in tempValue.indices.reversed()) {
                temp = tempNumber[i].toString().toInt() +
                        tempValue[i].toString().toInt() +
                        temp
                result = (temp % 10).toString() + result
                temp /= 10
            }
            if (temp > 0)
                result = temp.toString() + result

            if (number.negative or this.negative)
                return BigNumber("-"+result)
            else 
                return BigNumber(result)
        }
        else 
            return sub(number)
    }

    private fun sub(number: BigNumber):BigNumber {
        var ymenshaemoe=_number
        var vichitaemoe=number._number

        if (ymenshaemoe.length>vichitaemoe.length)
            vichitaemoe=vichitaemoe.padStart(
                ymenshaemoe.length,'0')
        else
            ymenshaemoe=ymenshaemoe.padStart(
                vichitaemoe.length,'0')

        if (ymenshaemoe.compareTo(vichitaemoe)<0) {
            val temp=ymenshaemoe
            ymenshaemoe=vichitaemoe
            vichitaemoe=temp
        }

        var temp=0
        var result=""
        for (i in ymenshaemoe.indices.reversed()) {
            temp=(ymenshaemoe[i].toInt()-0x30) -
                    (vichitaemoe[i].toInt()-0x30) -
                    temp
            if (temp<0){
                result = (temp + 10).toString() + result
                temp=1
            }
            else {
                result = temp.toString() + result
                temp=0
            }
        }

        if (number.negative or this.negative)
            return BigNumber("-"+result)
        else
            return BigNumber(result)
    }

    override fun toString(): String =
        "BigNumber(${if (negative) "-" else ""}$_number)"

    private fun mul(number: BigNumber):BigNumber{
        var mnozhitel=number
        var result=BigNumber()
        while(mnozhitel._number!="0"){
            result = result.add(_number)
            mnozhitel.add(-1)
        }
        return result
    }

    fun mul(number: Any):BigNumber{
        when(number){
            is Int, is Long,is Short,is Byte->
                return mul(BigNumber(number.toString()))
            is String ->{
                return mul(BigNumber(number))
            }
        }
        throw Exception("c таким типом не работаю")
    }

    fun sub(number: Any):BigNumber{
        when(number){
            is Int, is Long,is Short,is Byte->
                return add(BigNumber("-"+number.toString()))
            is String ->{
                return add(BigNumber("-"+number))
            }
        }
        throw Exception("c таким типом не работаю")
    }
    
    fun add(number:Any): BigNumber{
       when(number){
           is Int, is Long,is Short,is Byte->
               return add(BigNumber(number.toString()))
           is String ->{
               return add(BigNumber(number))
           }
       }
       throw Exception("c таким типом не работаю")
    }
}


fun main(){
    try {
        var bn = BigNumber("2")
        println(bn.mul("2").value)
    }catch (e:Exception){
        println(e)
    }
}
```

[1]: http://www.ccfit.nsu.ru/~deviv/courses/oop/cpp-tasks-koi.html#TASK2

[2]: http://www.quizful.net/test/oop_basics